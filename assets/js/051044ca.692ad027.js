(self.webpackChunkfossology_blogs=self.webpackChunkfossology_blogs||[]).push([[730],{3905:function(e,t,o){"use strict";o.d(t,{Zo:function(){return c},kt:function(){return m}});var n=o(7294);function s(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function l(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){s(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function r(e,t){if(null==e)return{};var o,n,s=function(e,t){if(null==e)return{};var o,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(s[o]=e[o]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(s[o]=e[o])}return s}var i=n.createContext({}),p=function(e){var t=n.useContext(i),o=t;return e&&(o="function"==typeof e?e(t):l(l({},t),e)),o},c=function(e){var t=p(e.components);return n.createElement(i.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var o=e.components,s=e.mdxType,a=e.originalType,i=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),d=p(o),m=s,h=d["".concat(i,".").concat(m)]||d[m]||u[m]||a;return o?n.createElement(h,l(l({ref:t},c),{},{components:o})):n.createElement(h,l({ref:t},c))}));function m(e,t){var o=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var a=o.length,l=new Array(a);l[0]=d;var r={};for(var i in t)hasOwnProperty.call(t,i)&&(r[i]=t[i]);r.originalType=e,r.mdxType="string"==typeof e?e:s,l[1]=r;for(var p=2;p<a;p++)l[p]=o[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,o)}d.displayName="MDXCreateElement"},3095:function(e,t,o){"use strict";o.r(t),o.d(t,{frontMatter:function(){return l},metadata:function(){return r},toc:function(){return i},default:function(){return c}});var n=o(2122),s=o(9756),a=(o(7294),o(3905)),l={},r={unversionedId:"docs/Install-from-Source",id:"docs/Install-from-Source",isDocsHomePage:!1,title:"Install-from-Source",description:"Source Install",source:"@site/docs/docs/Install-from-Source.md",sourceDirName:"docs",slug:"/docs/Install-from-Source",permalink:"/fossology-blogs/docs/docs/Install-from-Source",editUrl:"https://github.com/Aman-Codes/fossology-blogs/edit/master/docs/docs/Install-from-Source.md",version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Install-Fossology-on-a-Jenkins-Server",permalink:"/fossology-blogs/docs/docs/Install-Fossology-on-a-Jenkins-Server"},next:{title:"Job-Scheduler",permalink:"/fossology-blogs/docs/docs/Job-Scheduler"}},i=[{value:"Source Install",id:"source-install",children:[]}],p={toc:i};function c(e){var t=e.components,o=(0,s.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,n.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h3",{id:"source-install"},"Source Install"),(0,a.kt)("p",null,"This document is designed to help you get FOSSology configured and ready to use. Its intended audience is the system administrator who wants to quickly get a local FOSSology instance up and running from source, or a distribution developer looking to create packages."),(0,a.kt)("p",null,"For other system administrator documentation, including where to download the source, see our ",(0,a.kt)("a",{parentName:"p",href:"http://www.fossology.org/projects/fossology/wiki/Sysadmin_Documentation"},"Sysadmin Documentation"),". "),(0,a.kt)("p",null,"(In examples, # is as root, $ is mortal) "),(0,a.kt)("h4",{id:"short-installation-instructions"},"Short Installation Instructions"),(0,a.kt)("p",null,"If you have any old FOSSology installs you want to remove from the system you can run the fo-cleanold script"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"# utils/fo-cleanold\n")),(0,a.kt)("p",null,"If you have an existing install that you want to transition, be sure to back up your repository, database, and config files before proceeding."),(0,a.kt)("h5",{id:"1-install-dependencies"},"1. Install dependencies"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"# utils/fo-installdeps\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"NOTE"),":This program requires the lsb_release command. On Debian based systems this is probably in the lsb-release package, on Fedora/RedHat systems it is probably the redhat-lsb package. For example for centos7:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"# yum install redhat-lsb\n")),(0,a.kt)("h5",{id:"2-build-fossology"},"2. Build FOSSology"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"$ make\n")),(0,a.kt)("p",null,"If you want to do a non-standard build, see [","[HACKING]","]"),(0,a.kt)("p",null,"On centos7 the fo-installdeps script does not (yet) install the development tools, including the c++ compiler which is needed for the copyright agent for example (most of the original agents are written in c and php, but the copyright agent for example is written in c++). Thus you might want to install the gnu c++ compiler tools"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"# yum groupinstall 'Development Tools'\n")),(0,a.kt)("h5",{id:"25-install-composer-optional-some-versions-prior-31-rc3"},"2.5 Install Composer (optional, some versions prior 3.1-RC3)"),(0,a.kt)("p",null,"Composer is a PHP package management tool which is not installable as package on some Linux distros, therefore we need to install it at some versions of the fossology master (the composer installation needed some adjustments over some time):"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"# ./utils/install_composer.sh\n")),(0,a.kt)("h5",{id:"3-install-fossology"},"3. Install FOSSology"),(0,a.kt)("p",null,"To install (finally) FOSSology"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"# make install\n")),(0,a.kt)("h5",{id:"31-install-fossology-offline-without-access-to-composer"},"3.1 Install FOSSology offline (without access to composer)"),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"Makefile")," of FOSSology has a separate target called ",(0,a.kt)("inlineCode",{parentName:"p"},"composer_install")," which is used at the end of ",(0,a.kt)("inlineCode",{parentName:"p"},"make install")," target to download the composer dependencies. However, if you are behind a corporate network and do not have access to internet, FOSSology can be installed without downloading the composer dependencies and shipping the composer's vendor from a separate machine."),(0,a.kt)("p",null,"To do so, download the composer dependencies on a computer with internet access and tar them."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"$ composer --working-dir=src install && composer --working-dir=src dump-autoload\n$ tar -czvf php-vendor.tar.gz -C src vendor\n")),(0,a.kt)("p",null,"Ship this tar to the destination system and perform offline install"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"# make install_offline\n")),(0,a.kt)("p",null,"Untar the composer dependencies"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"# tar -xzvf php-vendor.tar.gz --directory=/usr/local/share/fossology/\n# chown fossy:fossy /usr/local/share/fossology/\n$ rm -f php-vendor.tar.gz\n")),(0,a.kt)("h5",{id:"4-run-the-postinstall-script"},"4. Run the postinstall script"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"# /usr/local/lib/fossology/fo-postinstall\n")),(0,a.kt)("h5",{id:"5-login-to-fossology-with-the-default-fossyfossy-user-and-password-and"},"5. Login to FOSSology with the default fossy/fossy user and password and:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Create yourself a user with administrative privileges"),(0,a.kt)("li",{parentName:"ol"},"Change the default password for user fossy")),(0,a.kt)("h5",{id:"6-test-that-things-are-installed-correctly"},"6. Test that things are installed correctly"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"# /usr/local/etc/fossology/mods-enabled/scheduler/agent/fo_scheduler -t\n")),(0,a.kt)("h5",{id:"7-start-the-fossology-scheduler-daemon"},"7. Start the fossology scheduler daemon"),(0,a.kt)("p",null,"On new systems with ",(0,a.kt)("strong",{parentName:"p"},"systemd")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"# systemctl enable --now fossology\n")),(0,a.kt)("p",null,"On old systems with ",(0,a.kt)("strong",{parentName:"p"},"SysV")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"# /etc/init.d/fossology start\n")),(0,a.kt)("p",null,"You're done, point your web browser at the new install (http://yourhostname/repo/) and start using FOSSology! If the browser returns a not found, pls check if the fossology apache httpd configuration is actually loaded by the apache httpd. The installation places the original file at ",(0,a.kt)("inlineCode",{parentName:"p"},"/usr/local/etc/fossology/conf/src-install-apache-example.conf")," from which a soft link is created during ",(0,a.kt)("inlineCode",{parentName:"p"},"# make install"),"."),(0,a.kt)("h5",{id:"8-configure-and-tune-the-systemconfiguration-and-tuning"},"8. [","[Configure and tune the system|Configuration and Tuning]","]"),(0,a.kt)("h4",{id:"dependencies"},"Dependencies"),(0,a.kt)("p",null,"We provide a script, fo-installdeps (see above), to install needed dependencies. FOSSology uses lots of different existing tools and software and expects to find them installed on the system."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"For Debian nearly all packages can be found in main, unless you want the non-free version of unrar"),(0,a.kt)("li",{parentName:"ul"},"For Ubuntu you will need a universe apt source setup"),(0,a.kt)("li",{parentName:"ul"},"For RHEL you can find needed packages from EPEL\n(",(0,a.kt)("a",{parentName:"li",href:"http://fedoraproject.org/wiki/EPEL"},"http://fedoraproject.org/wiki/EPEL"),") or rpm.pbone.net.")),(0,a.kt)("p",null,"If ",(0,a.kt)("inlineCode",{parentName:"p"},"fo-installdeps")," doesn't support the distro you are running (or fails to install everything that's needed) please ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/fossology/fossology/issues/new?labels=bug&template=bug_report.md"},"report a bug"),"."),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"fo-installdeps")," command provides output that can be helpful in\nfiguring out what dependent packages you will have to install either\nfrom your distro or some other location."),(0,a.kt)("p",null,"The script, ",(0,a.kt)("inlineCode",{parentName:"p"},"fo-installdeps")," itself will install the fossology core dependencies. Then every module, like scheduler, www, nomos, pkgagent, etc., will install any specific dependencies that they require with a script called ",(0,a.kt)("inlineCode",{parentName:"p"},"mod_deps"),".  For example, ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/fossology/fossology/blob/master/src/scheduler/mod_deps"},"fossology/src/scheduler/mod_deps"),"."),(0,a.kt)("h4",{id:"fo-postinstall"},"fo-postinstall"),(0,a.kt)("p",null,"It is highly recommended that you run the ",(0,a.kt)("inlineCode",{parentName:"p"},"fo-postinstall")," script. However,\nyou may want to know the details of what the script is doing. This may be out\nof academic curiosity, or more likely because you may have to troubleshoot\nsomething gone wrong."),(0,a.kt)("h4",{id:"setting-up-users-and-groups"},"Setting up Users and Groups"),(0,a.kt)("p",null,'You are expected to already have a "postgres" user as part of the\nsystem postgresql install, and a "www-data" user as part of the\napache2 install. Note that some versions of Apache (like the one\nshipped with RHEL) use the user apache, not www-data. Whichever user\nyour Apache uses, make sure that the user (www-data or apache) gets\nadded to the "fossy" group.'),(0,a.kt)("p",null,'FOSSology requires a system user and a system group both named\n"fossy".'),(0,a.kt)("p",null,"The /etc/passwd entries for these user should look\nsomething like (Note: your uid & gid values may be different):"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"fossy:x:107:1002:fossology,,,:/srv/fossology:/bin/bash\n")),(0,a.kt)("p",null,"and the /etc/group entry"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"fossy:x:1001:fossy,www-data\n")),(0,a.kt)("p",null,"On a system with the useradd and groupadd commands (all LSB systems\nincluding Debian, Fedora, etc) you can create the above system user\nand group with the following commands as root:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},"# groupadd fossy\n# useradd -c FOSSology -d /srv/fossology -g fossy -s /bin/false fossy\n")),(0,a.kt)("p",null,"Alternatively, you can use the adduser command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-console"},'# adduser --gecos "FOSSology" --home /srv/fossology --system --group fossy\n')),(0,a.kt)("p",null,"You can see the rest of what fo-postinstall does in ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/fossology/fossology/blob/master/install/fo-postinstall.in"},"fossology/install/fo-postinstall"),"."))}c.isMDXComponent=!0}}]);