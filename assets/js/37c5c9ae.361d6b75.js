(self.webpackChunkfossology_blogs=self.webpackChunkfossology_blogs||[]).push([[2208],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=u(n),m=r,h=d["".concat(s,".").concat(m)]||d[m]||c[m]||o;return n?a.createElement(h,l(l({ref:t},p),{},{components:n})):a.createElement(h,l({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var u=2;u<o;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4689:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},metadata:function(){return i},toc:function(){return s},default:function(){return p}});var a=n(2122),r=n(9756),o=(n(7294),n(3905)),l={},i={unversionedId:"docs/Coding-Style",id:"docs/Coding-Style",isDocsHomePage:!1,title:"Coding-Style",description:"Basic Coding Style",source:"@site/docs/docs/Coding-Style.md",sourceDirName:"docs",slug:"/docs/Coding-Style",permalink:"/fossology-blogs/docs/docs/Coding-Style",editUrl:"https://github.com/Aman-Codes/fossology-blogs/edit/master/docs/docs/Coding-Style.md",version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Building Fossology using [[project builder| http://www.project-builder.org/]]",permalink:"/fossology-blogs/docs/docs/Building-Fossology-using-pbuilder"},next:{title:"Composer",permalink:"/fossology-blogs/docs/docs/Composer"}},s=[{value:"Basic Coding Style",id:"basic-coding-style",children:[]},{value:"Default License and File Headers",id:"default-license-and-file-headers",children:[]},{value:"Coding Guidelines for PHP",id:"coding-guidelines-for-php",children:[]},{value:"Coding Guidelines for jQuery",id:"coding-guidelines-for-jquery",children:[]},{value:"Coding Guidelines for TWIG",id:"coding-guidelines-for-twig",children:[]},{value:"Coding Guidelines for C/C++",id:"coding-guidelines-for-cc",children:[]}],u={toc:s};function p(e){var t=e.components,n=(0,r.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"basic-coding-style"},"Basic Coding Style"),(0,o.kt)("p",null,"Below are the very basic coding style conventions, if you prefer the concise, quick way."),(0,o.kt)("h4",{id:"match-braces"},"Match braces"),(0,o.kt)("p",null,"Align braces in same column."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"struct mystruct \n{\n  int myvar;\n};\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"NOT")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"struct mystruct {\n  int myvar;\n};\n")),(0,o.kt)("p",null,"This is a general rule for braces.  It applies to switch statements, blocks under if statements, function blocks, ..."),(0,o.kt)("h4",{id:"tabs"},"Tabs"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Don't insert tabs into the source file.  "),(0,o.kt)("li",{parentName:"ul"},"Set your editor to translate a tab into two spaces.")),(0,o.kt)("h4",{id:"indent-offset"},"Indent Offset"),(0,o.kt)("p",null,"Use two spaces as indent offset."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"for (i=0; i<bufsize; i++)\n{\n  buf[i] = tolower(buf[i]);\n  if(buf[i] < 0) \n  {\n    buf[i] = 127;\n  }\n}\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"NOT")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"for (i=0; i<bufsize; i++)\n{\n        buf[i] = tolower(buf[i]);\n        if(buf[i] < 0) \n        {\n                buf[i] = 127;\n        }\n}\n")),(0,o.kt)("h4",{id:"local-function-names"},"Local Function Names"),(0,o.kt)("p",null,"Don't use an underscore to denote local functions."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"void  entry_print(void* to_print, FILE* ostr)\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"NOT")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"void  _entry_print(void* to_print, FILE* ostr)\n")),(0,o.kt)("h4",{id:"doxygen"},"Doxygen"),(0,o.kt)("p",null,'The source documentation is embedded in the code and parsed by doxygen.  Use "Doxygen commands.":',(0,o.kt)("a",{parentName:"p",href:"http://www.stack.nl/~dimitri/doxygen/commands.html"},"http://www.stack.nl/~dimitri/doxygen/commands.html")," A typical doc header looks like:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"/*!\n * \\brief analyze a file for the copyright information\n *\n * This will open and analyze the file provided. It is important to note that\n * this function will clear any information that was previously stored in copy.\n * All information that is needed should be extracted from copy after a call to\n * analyze before calling analyze again.\n *\n * \\param copy the copyright instance that will be analyzed\n * \\param file_name the name of the file to be openned and analyzed\n *\n * \\return 0 on OK, -1 on failure.\n * \n * \\todo blah blah\n */\nvoid copyright_analyze(copyright copy, FILE* istr)\n")),(0,o.kt)("p",null,"There are many other useful doxygen commands, including:",(0,o.kt)("br",{parentName:"p"}),"\n","\\code ... \\endcode",(0,o.kt)("br",{parentName:"p"}),"\n","\\verbatim ... \\endverbatim",(0,o.kt)("br",{parentName:"p"}),"\n","\\li",(0,o.kt)("br",{parentName:"p"}),"\n","\\n  "),(0,o.kt)("h4",{id:"comments"},"Comments"),(0,o.kt)("p",null,"Comments are good.  Use them.\nWhen commenting a variable, indent the comment starting on the same line"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"struct regex_file_struct\n{\n  int      ftype1;          /* 1=filename, 2=license \n                             * 3=bucket, 4=tag       */\n  char    *regex1;          /* regex1 string         */\n  regex_t  compRegex1;\n};\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"NOT")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"struct regex_file_struct\n{\n  /* 1=filename, 2=license */\n  int      ftype1;\n  /* regex1 string */\n  char    *regex1;\n  regex_t  compRegex1;\n};\n")),(0,o.kt)("h4",{id:"sql"},"SQL"),(0,o.kt)("p",null,"The current code base has sql scattered in each file that executes a sql statement.  The problem with this is that we sometimes have multiple statements to accomplish the same task.  Sometimes both versions work correctly and sometimes they don't.  I propose that we start a /ui/common/common-sql.php to define common functions to return results.  For example, one common function is to get all the non-artifact uploadtree records in an upload or subtree.  "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'function GetUploadtreeResult($upload_fk, $lft="", $rgt="")\n{\n  global $PG_CONN;\n\n  if (empty($upload_fk)) return NULL;\n\n  /* Missing $lft or $rgt means to return results for the\n   * whole upload instead of a subtree \n   */\n  if (empty($lft) || (empty($rgt))) {\n    $LftRgtCondition = "";\n  }\n  else {\n    $LftRgtCondition = "and lft>\'$lft\'  and rgt<\'$rgt\'";\n  }\n  $sql = "select uploadtree_pk, ufile_name, lft, rgt from uploadtree \n            where upload_fk=\'$upload_fk\' \n              $LftRgtCondition\n              and ((ufile_mode & (1<<28)) = 0)";\n    $outerresult = pg_query($PG_CONN, $sql);\n    DBCheckResult($outerresult, $sql, __FILE__, __LINE__);\n  return $outerresult;\n}\n')),(0,o.kt)("h4",{id:"internationalization"},"Internationalization"),(0,o.kt)("p",null,"[Internationalization]"," (/fossology/fossology/wiki/i18N-Internationalization)"),(0,o.kt)("h2",{id:"default-license-and-file-headers"},"Default License and File Headers"),(0,o.kt)("p",null,"Each source file should have a GPL 2.0+ license header copyright notice.  For HP developers, this looks like"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"/***************************************************************\nCopyright (C) 2008-2010 Hewlett-Packard Development Company, L.P.\n\nThis program is free software; you can redistribute it and/or\nmodify it under the terms of the GNU General Public License\nversion 2 as published by the Free Software Foundation.\n\nThis program is distributed in the hope that it will be useful,\nbut WITHOUT ANY WARRANTY; without even the implied warranty of\nMERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\nGNU General Public License for more details.\n\nYou should have received a copy of the GNU General Public License along\nwith this program; if not, write to the Free Software Foundation, Inc.,\n51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n***************************************************************/\n")),(0,o.kt)("p",null,"Please do not forget to update the year when a file is modified. If you feel like the license and copyright in the beginning of each file is too much - maybe also because a config file is not suitable for 'licensing'), please use that header:"),(0,o.kt)("pre",{style:"white-space: pre-wrap; \nwhite-space: -moz-pre-wrap; \nwhite-space: -pre-wrap; \nwhite-space: -o-pre-wrap; \nword-wrap: break-word;"},"# properties file of the fossology xy agent # Copyright Siemens AG 2015, some.person@siemens.com # # Copying and distribution of this file, with or without modification, # are permitted in any medium without royalty provided the copyright # notice and this notice are preserved.  This file is offered as-is, # without any warranty. # # Description: this amazing file hold the information about"),(0,o.kt)("p",null,"After some time of using Fossology you will understand that explicit licensing in files are such a great help!"),(0,o.kt)("h2",{id:"coding-guidelines-for-php"},"Coding Guidelines for PHP"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Code must use 2 spaces for indenting, not tabs."),(0,o.kt)("li",{parentName:"ul"},"There must be one blank line after the namespace declaration, and there must be one blank line after the block of use declarations."),(0,o.kt)("li",{parentName:"ul"},"Opening braces for classes must go on the next line, and closing braces must go on the next line after the body."),(0,o.kt)("li",{parentName:"ul"},"Opening braces for methods must go on the next line, and closing braces must go on the next line after the body."),(0,o.kt)("li",{parentName:"ul"},"Visibility must be declared on all properties and methods; abstract and final must be declared before the visibility; static must be declared after the visibility."),(0,o.kt)("li",{parentName:"ul"},"Control structure keywords must have one space after them; method and function calls must not."),(0,o.kt)("li",{parentName:"ul"},"Opening braces for control structures must go on the same line, and closing braces must go on the next line after the body."),(0,o.kt)("li",{parentName:"ul"},"Opening parentheses for control structures must not have a space after them, and closing parentheses for control structures must not have a space before."),(0,o.kt)("li",{parentName:"ul"},"The closing?> tag must be omitted from files containing only PHP."),(0,o.kt)("li",{parentName:"ul"},"The PHP constants true, false, and null must be in lower case."),(0,o.kt)("li",{parentName:"ul"},"variables: CamelCase starting with lowercase"),(0,o.kt)("li",{parentName:"ul"},"methods: CamelCase starting with lowercase"),(0,o.kt)("li",{parentName:"ul"},"struct types: CamelCase starting with uppercase"),(0,o.kt)("li",{parentName:"ul"},"Extends and implements keywords must be declared on the same line as the class name."),(0,o.kt)("li",{parentName:"ul"},"Property names should not be prefixed with a single underscore to indicate protected or private visibility. And var keyword must not be used to declare a property."),(0,o.kt)("li",{parentName:"ul"},"Method names must not be declared with a space after the method name. The opening brace must go on next line, and the closing brace must go on the next line following the body, there must not be a space after opening parenthesis and closing parenthesis.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Example:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php"},"namespace Fossology\\Lib\\Dao;\n\n/**\n * Class AgentsDao\n * @package Fossology\\Lib\\Dao\n */\nclass AgentsDao extends Object\n{\n  /** @var DbManager */\n  private $dbManager;\n  \n  /**\n   * @param DbManager $dbManager\n   */\n  function __construct(DbManager $dbManager)\n  {\n    $this->dbManager = $dbManager;\n    $this->logger = new Logger(self::className());\n  }\n}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"An if, for, foreach, while and do while structure is same. Note the placement of parentheses, spaces, and braces; and that else and else if are on the same line as the closing brace from the earlier body."),(0,o.kt)("li",{parentName:"ul"},"Note for Switch case the placement of parentheses, spaces, and braces. The case statement must be indented once from switch, and the break keyword (or other terminating keyword) must be indented at the same level as the case body.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Example")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-php"},"    if (preg_match($pattern='/^[a-zA-Z0-9]+$/', $subject)) {\n      $var = '$this->vars[\"'.$subject.'\"]';\n    } else if (preg_match($pattern='/^([a-zA-Z0-9]+)\\.([a-zA-Z0-9]+)$/', $subject, $matches)) {\n      $var = '$this->vars[\"'.$matches[1].'\"][\"'.$matches[2].'\"]';\n    }\n")),(0,o.kt)("p",null,"The general style rules for control structures are as follows:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"There must be one space after the control structure keyword."),(0,o.kt)("li",{parentName:"ul"},"There must not be a space after the opening parenthesis."),(0,o.kt)("li",{parentName:"ul"},"There must not be a space before the closing parenthesis."),(0,o.kt)("li",{parentName:"ul"},"There must be one space between the closing parenthesis and the opening brace"),(0,o.kt)("li",{parentName:"ul"},"The structure body must be indented once."),(0,o.kt)("li",{parentName:"ul"},"The closing brace must be on the next line after the body.")),(0,o.kt)("p",null,"The body of each structure must be enclosed by braces. This standardizes how the structures look, and reduces the likelihood of introducing errors as new lines get added to the body."),(0,o.kt)("h2",{id:"coding-guidelines-for-jquery"},"Coding Guidelines for jQuery"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Indentation with 2 spaces not tabs."),(0,o.kt)("li",{parentName:"ul"},"No white space at the end of line or on blank lines."),(0,o.kt)("li",{parentName:"ul"},"If/else/for/while/try : Note the placement of parentheses, spaces, and braces; and that else and else if are on the same line as the closing brace go on next line."),(0,o.kt)("li",{parentName:"ul"},"Unary special-character operators (e.g.,!, ++) must not have space next to their operand."),(0,o.kt)("li",{parentName:"ul"},"Any, and; must not have preceding space."),(0,o.kt)("li",{parentName:"ul"},"Any; used as a statement terminator must be at the end of the line."),(0,o.kt)("li",{parentName:"ul"},"Any: after a property name in an object definition must not have preceding space."),(0,o.kt)("li",{parentName:"ul"},"The? And: in a ternary conditional must have space on both sides."),(0,o.kt)("li",{parentName:"ul"},"No filler spaces in empty constructs (e.g., {}, [], fn())"),(0,o.kt)("li",{parentName:"ul"},"New line at the end of each file."),(0,o.kt)("li",{parentName:"ul"},"Better to initialize variables on top. ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jQuery"},"var myKey = 0;\nvar myVal = 0;\n\nvar commentModal = null;\nvar uploadId = 0;\nvar statusId = 0;\n\n$(document).ready(function () {\n  table = createBrowseTable();\n  $('#insert_browsetbl_filter').append($('#browsetbl_filter'));\n  initPrioClick();\n  table.on('draw', function () {\n    initPrioClick();\n    initPrioDraw();\n  });\n  commentModal = $('#commentModal').plainModal();\n});\n\nfunction initPrioClick() {\n  $(\"td.priobucket\").click(function () {\n    table = createBrowseTable();\n    elementData = table.fnGetData(this);\n    yourKey = elementData[0];\n    if (myKey > 0 && myKey !== yourKey) {\n      changePriority(myKey, yourKey);\n      myKey = 0;\n      myVal = 0;\n      return;\n    } else if (yourKey === myKey) {\n      myKey = 0;\n      myVal = 0;\n    } else {\n      myKey = elementData[0];  //upload_pk\n      myVal = elementData[1];  //priority\n    }\n    initPrioDraw();\n  });\n}\n")),(0,o.kt)("h2",{id:"coding-guidelines-for-twig"},"Coding Guidelines for TWIG"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Put one (and only one) space after the start of a delimiter ({{, {%, and {#) and before the end of a delimiter (}}, %}, and #})")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-Twig"},"{{ foo }}\n{# comment #}\n{% if foo %}{% endif %}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"When using the whitespace control character, do not put any spaces between it and the delimiter:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-Twig"},"{{- foo -}}\n{#- comment -#}\n{%- if foo -%}{%- endif -%}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Put one (and only one) space before and after the following operators: comparison operators (==, !=, <, >, >=, <=), math operators (+, -, /, *, %, //, **), logic operators (not, and, or), ~, is, in, and the ternary operator (?:):")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-Twig"},"{{ 1 + 2 }}\n{{ foo ~ bar }}\n{{ true ? true : false }}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Put one (and only one) space after the : sign in hashes and , in arrays and hashes:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-Twig"},"{{ [1, 2, 3] }}\n{{ {'foo': 'bar'} }}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Do not put any spaces after an opening parenthesis and before a closing parenthesis in expressions:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-Twig"},"{{ 1 + (2 * 3) }}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Do not put any spaces before and after string delimiters:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-Twig"},"{{ 'foo' }}\n{{ \"foo\" }}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Do not put any spaces before and after the following operators: |, ., .., []:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-Twig"},"{{ foo|upper|lower }}\n{{ user.name }}\n{{ user[name] }}\n{% for i in 1..12 %}{% endfor %}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Do not put any spaces before and after the parenthesis used for filter and function calls:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-Twig"},"{{ foo|default('foo') }}\n{{ range(1..10) }}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Do not put any spaces before and after the opening and the closing of arrays and hashes:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-Twig"},"{{ [1, 2, 3] }}\n{{ {'foo': 'bar'} }}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Use lower cased and underscored variable names:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-Twig"},"{% set foo = 'foo' %}\n{% set foo_bar = 'foo' %}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Indent your code inside tags (use the same indentation as the one used for the target language of the rendered template):")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-Twig"},"{% block foo %}\n{% if true %}\n                  true\n{% endif %}\n{% endblock %}\n")),(0,o.kt)("h2",{id:"coding-guidelines-for-cc"},"Coding Guidelines for C/C++"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Header Files:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"All header files should have #define guards to prevent multiple inclusions. The format of the symbol name should be ",(0,o.kt)("inlineCode",{parentName:"li"},"<PROJECT>_<PATH>_<FILE>_H_"),".\nTo guarantee uniqueness, they should be based on the full path in a project's source tree.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},"#ifndef MONK_AGENT_CLI_H\n#define MONK_AGENT_CLI_H\n\u2026\n#endif  //MONK_AGENT_CLI_H\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Upper and lower case")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"variables: CamelCase starting with lowercase"),(0,o.kt)("li",{parentName:"ul"},"methods: CamelCase starting wiht lowercase"),(0,o.kt)("li",{parentName:"ul"},"struct types: CamelCase starting with upppercase")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"  char* string;\n  \n  Version version;\n\n  void printVersion(char* string) {\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Types")),(0,o.kt)("p",null,"The dereference operator should be appended to the type without space in order to become a part of the type name."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"  char* string;\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Structs")),(0,o.kt)("p",null,"Structs should be defined inside a typedef, omitting the intermediate struct type."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"  typedef struct {\n    int a;\n    char* b;\n  } Values;\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Match braces:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Align braces in same column.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},"struct mystruct\n{\n  int myvar;\n}\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"This is a general rule for braces. It applies to switch statements, blocks under if statements, function blocks.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Tabs:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Don't insert tabs into the source file. Set your editor to translate a tab into two spaces. ")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},"for (i=0; i<bufsize; i++)\n{\n  buf[i] = tolower(buf[i]);\n  if(buf[i] < 0)\n  {\n    buf[i] = 127;\n  }\n}\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Indent Offset:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Use two spaces as indent offset.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Local Function Names:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Don't use an underscore to denote local functions, use hunchedCamelCase.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},"void entryPrint (void* to_print, FILE* ostr)     //Good\n\nvoid _entry_print (void* to_print, FILE* ostr)   //Bad\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Structs:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Structs should be defined inside a typedef, omitting the intermediate struct type.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},"typedef struct {\n    int a;\n    char* b;\n  } Values;\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Doxygen:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"The source documentation is embedded in the code and parsed by doxygen. ")),(0,o.kt)("p",null,"A typical doc header looks like:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},"  /*!\n   * \\brief analyze a file for the copyright information\n   *\n   * This will open and analyze the file provided. It is important to note that\n   * this function will clear any information that was previously stored in copy.\n   * All information that is needed should be extracted from copy after a call to\n   * analyze before calling analyze again.\n   *\n   * \\param copy the copyright instance that will be analyzed\n   * \\param file_name the name of the file to be opened and analyzed\n   *\n   * \\return 0 on OK, -1 on failure.\n   *\n   * \\todo blah blah\n   */\n  void copyright_analyze(copyright copy, FILE* istr)\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Comments:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Comments gets outdated very fast, it's preferable to write code is readable without comments using speaking variable names. Comments are a last resort to explain complex things, like mathematical formulae or algorithms in optimized code.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},"struct regex_file_struct\n{\n  int      ftype1;       /* 1=filename, 2=license\n                          * 3=bucket, 4=tag       */\n  char    *regex1;       /* regex1 string         */\n  regex_t  compRegex1;\n};\n\nOr \n\ntypedef struct {\n  License* license;\n  union {\n    DiffPoint* full;\n    DiffResult* diff;\n  } ptr;\n  int type;\n} Match;\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Performance and Readability:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"It is more important to be correct than to be fast."),(0,o.kt)("li",{parentName:"ul"},"It is more important to be maintainable than to be fast."),(0,o.kt)("li",{parentName:"ul"},"Fast code that is difficult to maintain is likely going to be looked down upon.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Operator Overloading in C++:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Overloaded Operators can yield very readable code, just follow the rule of least surprise.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Where to put spaces:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Use a space before an opening parenthesis when calling functions, or indexing, do not put a space after the opening parenthesis and the closing on. Like this:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},"void hashAdd (char * value, uint32_t * currentHash); //Good\ntargs [8]; //Good\n\nvoid hash_add( char * value , uint32_t * currentHash); //Bad\ntargs[ 8 ]; //Bad\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Inline functions:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"As Inline functions are handled by the compiler. These have to be defined in the header and are therefore hard to reuse. Please avoid them.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Local Variables:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Place a function's variables in the narrowest scope possible, and initialize variables in the declaration."),(0,o.kt)("li",{parentName:"ul"},"Declare local variables, as local to a scope as possible, and as close to the first use as possible.")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},"long uploadFileId;\nuploadFileId = queryFileIdForUploadTreeId(state->dbManager, uploadTreeId);      //Bad\n\nlong uploadFileId = queryFileIdForUploadTreeId(state->dbManager, uploadTreeId); //Good\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Multiline Parameters:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"When you need to write down parameters in multiple lines, indent the parameters to be below the previous line parameters, like this:")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"GOOD")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},"long licenseId = insertNewLicense(state->dbManager, shortLicenseNameForQuery,\n                                  fullLicenseNameForQuery, refText, uploadId);\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"If you do not want to have parameters in the same line as the method invocation because you are running out of space, you can indent the parameters in the next line, like this:")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"GOOD")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},'char* queryPFileForFileId(fo_dbManager* dbManager, long fileId) {\n  PGresult* fileNameResult = fo_dbManager_ExecPrepared(\n    fo_dbManager_PrepareStamement(\n      dbManager,\n      "queryPFileForFileId",\n      "select pfile_sha1 || \'.\'|| pfile_size AS pfilename from pfile where pfile_pk=$1",\n      long),\n    fileId\n  );\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"BAD")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},'char* queryPFileForFileId(fo_dbManager* dbManager, long fileId) {\n  PGresult* fileNameResult = fo_dbManager_ExecPrepared(\n    fo_dbManager_PrepareStamement(\n      dbManager\n      , "queryPFileForFileId"\n      , "select pfile_sha1 ||\'.\'|| pfile_size AS pfilename from pfile where pfile_pk=$1"\n      , long),\n    fileId\n  );\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Constructors:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Avoid doing complex initialization in constructors (in particular, initialization that can fail or that requires virtual method calls).")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Class data member\u2019s initialization:"),"\\"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"If your class defines member variables, you must provide an in-class initializer for every member variable or write a constructor (which can be a default constructor). If you do not declare any constructors yourself then the compiler will generate a default constructor for you, which may leave some fields uninitialized or initialized to inappropriate values.")),(0,o.kt)("p",null,"The following snippet shows usage of constructors to initialize the data members. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},"class CopyrightMatch\n{\npublic:\n  CopyrightMatch(std::string content, std::string type, unsigned start, unsigned length);\n  CopyrightMatch(std::string content, std::string type, unsigned start);\n  CopyrightMatch();\n  const std::string getType() const;\n  const std::string getContent() const;\n  size_t getStart() const;\n  size_t getLength() const;\nprivate:\n  std::string content;\n  unsigned start;\n  size_t length;\n  std::string type;\n};\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Delegating Constructors:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Use delegating constructors when they reduce code duplication. For example:")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},"CopyrightMatch::CopyrightMatch(std::string content, std::string type, unsigned int start, unsigned int length) :\n        content(content), start(start), length(length), type(type)\n{\n}\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Inheritance:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},'Composition is often more appropriate than inheritance. When using inheritance, make it public.\nAll inheritance should be public. If you want to do private inheritance, you should be including an instance of the base class as a member instead.\nDo not overuse implementation inheritance. Composition is often more appropriate. Try to restrict use of inheritance to the "is-a" case: RegexMatcher subclasses Matcher if it can reasonably be said that RegexMatcher "is a kind of" Matcher.')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},"class RegexMatcher : public virtual Matcher\n{\npublic:\n  RegexMatcher(const std::string type, const std::string pattern, int regexIndex = 0);\n  virtual std::vector<CopyrightMatch> match(const std::string content) const;\n  virtual ~RegexMatcher();\nprivate:\n  int regexIndex;\n  rx::regex matchingRegex;\n};\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Multiple Inheritance:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Multiple inheritance should be included when at most one of the base classes has an implementation.\nDerive class as virtual in case of multiple inheritance to overcome from ambiguity.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Access control:")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Make data members private, and provide access to them through accessor functions as needed.\n",(0,o.kt)("strong",{parentName:"li"},"Write Short Functions:"))),(0,o.kt)("p",null,"Prefer small and focused functions. If a function exceeds about 40 lines, think about whether it can be broken up without changing the structure of the program.\nNote: PLEASE DO NOT JUST BREAK THEM UP BY LINES BUT BY LOGICAL BUILDING BLOCKS"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Function Overloading:")),(0,o.kt)("p",null,"Use overloaded functions (including constructors) only if a reader looking at a call site can get a good idea of what is happening without having to first figure out exactly which overload is being called."),(0,o.kt)("p",null,"If you want to overload a function, consider qualifying the name with some information about the arguments."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},"class MyClass {\n public:\n  void Analyze(const string &text);\n  void Analyze(const char *text, size_t textlen);\n};\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"TODO comments:")),(0,o.kt)("p",null,"Use TODO comments for code that is temporary or for a short-term solution."),(0,o.kt)("p",null,"TODOs should include the string TODO in all caps the best context about the problem referenced by the TODO followed by the author or the person going to address the TODO functionality."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},'if (input.type.compare("statement") == 0)\n  {\n    /* !"#$%&\' */\n    input.content = rx::regex_replace(input.content, rx::regex("([\\\\x21-\\\\x27])|([*@])"), newtext);\n    /*  numbers-numbers, two or more digits, \', \' */\n\n//TODO    input.content = rx::regex_replace(input.content, rx::regex("(([0-9]+)-([0-9]+))|([0-9]{2,})|(,)"), newtext);\n//TODO input.content = rx::regex_replace(input.content, rx::regex(" : "), newtext);// free :, <author name>\n                            OR\n       input.content = rx::regex_replace(input.content, rx::regex(" : "), newtext);// free :, //TODO <author name>\n\n  }\n')),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Preprocessor directives:")),(0,o.kt)("p",null,"The hash mark that starts a preprocessor directive should always be at the beginning of the line.\nEven when preprocessor directives are within the body of indented code, the directives should start at the beginning of the line."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-C"},'if (argc > 1)\n  {\n    const vector<RegexMatcher>& regexMatchers = state.getRegexMatchers();\n#pragma omp parallel\n    {\n#pragma omp for\n      for (int argn = 1; argn < argc; ++argn)\n      {\n        const char* fileName = argv[argn];\n\n        fo::File file((unsigned long) argn, fileName);\n        vector<CopyrightMatch> matches = findAllMatches(file, regexMatchers);\n\n        stringstream ss;\n        ss << fileName << " ::" << endl << matches << endl;\n        cout << ss.str();\n      }\n    }\n  }\n')))}p.isMDXComponent=!0}}]);